<!DOCTYPE html>

<!-- Fig. 14.26: cannon.html -->
<!-- Cannon Game HTML5 document. -->
<html>
   <head>
      <meta charset = "utf-8">
      <title>Cannon Game</title>
      <script src= "welcome.js"></script>
	   <script src = "cannon.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

   </head>
   <header>


   </header>
   <body>
      <menu>
         <div class="nav-links">
            <ul>
            <li><a href="#photos">Register</a></li>
            <li><a href="#playlist">Let's Play</a></li>
            <li><a href="#like">About</a></li>
            </ul>
          </div>
      </menu>

   <content>
      <div id="welcome">
         <p>WELCOME!</p>
         <button id="regBut">Register</button>
         <button id="gameBut">Start to Play</button>
      </div>

      <div id="game">
         <audio id = "blockerSound" preload = "auto">
         <source src = "blocker_hit.ogg" type = "audio/ogg"></audio>
      <audio id = "targetSound" preload = "auto">
         <source src = "target_hit.ogg" type = "audio/ogg"></audio>
      <audio id = "cannonSound" preload = "auto">
         <source src = "cannon_fire.ogg" type = "audio/ogg"></audio>
      <canvas id = "theCanvas" width = "800" height = "600"></canvas> 
      <p><input id = "startButton" type = "button" value = "Start Game">
      </p>
      </div>

      <div id="reg">
         <p>
            Register Form
         </p>
         <form action="" onsubmit="return isValid()">
            Username: <input type="text" id="username" name="username" class="signUpField"> <br>
            Password: <input type="password" id="pass1" name="pass1" class="signUpField"> 
            <input type="checkbox" onclick="showPass('pass1')">Show Password <br>
            Password: <input type="password" id="pass2" name="pass2" class="signUpField"> 
            <input type="checkbox" onclick="showPass('pass2')">Show Password <br>
            <span id="errMsg1" class="err"></span> <br>

            First Name: <input type="text" id="fname" name="fname" class="signUpField"> 
            <span id="errMsg2" class="err"></span> <br>

            Last Name: <input type="text" id="lname" name="lname" class="signUpField">
            <span id="errMsg3" class="err"></span> <br>
            
            Email: <input type="email" id="email" name="email" class="signUpField">             

            Birthday: <input type="date" id="bday" name="bday" class="signUpField"> 
            <br>
            <p> <span id="errMsg" class="err"></span>  </p>
            <br>
            <input type="submit" id="subForm" value="Submit" class="signUpField"> <br>
         </form>

      </div>
      

   </content>
   </body>
   <footer>

   </footer>

   <script type="text/javascript"> 
      $(document ).ready( function()
      {
         $( "#game" ).hide();
         $( "#reg" ).hide();

      }
      );

      $('#gameBut' ).click( function()
      {
         $( "#game" ).show();
         $( "#welcome" ).hide();
         
      }
      );

      $('#regBut' ).click( function()
      {
         $( "#welcome" ).hide();
         $( "#reg" ).show();

         
      }
      );

      function showPass(pass) {
         var x = document.getElementById(pass);
         if (x.type === "password") {
            x.type = "text";
         } else {
            x.type = "password";
         }

      }

      function isValid() {

      var errMsgs = document.getElementsByClassName("err");
      for(i=0; i<errMsgs.length; i++)
      {         
         errMsgs[i].innerHTML = ""
      }

      var details = document.getElementsByClassName("signUpField");

      for (let i = 0; i < details.length; i++) {
         if (details[i].value == "")
         {
            document.getElementById("errMsg").innerHTML = "Please fill in all fields!";
            return false;
         }
      }

      if(details[1].value != details[2].value)
      {
         document.getElementById("errMsg1").innerHTML = "Please validate your password again!";
         return false;
      }

      if(details[1].value.length < 8)
      {
         document.getElementById("errMsg1").innerHTML = "Your password is short.";
         return false;
      }

      if(details[1].value.length < 7)
      {
         document.getElementById("errMsg1").innerHTML = "Your password is too short.";
         return false;
      }

      if(((/[0-9]/i.test(details[3].value))))
      {
         document.getElementById("errMsg2").innerHTML = "Name field conatin only letters";
         return false;
      }
      if(((/[0-9]/i.test(details[4].value))))
      {
         document.getElementById("errMsg3").innerHTML = "Name field conatin only letters";
         return false;
      }
      if(!(/[a-z]/i.test(details[1].value)))
      {
         document.getElementById("errMsg1").innerHTML = "Your password weak. Add letters.";
         return false;
      }

      if(!(/[0-9]/i.test(details[1].value)))
      {
         document.getElementById("errMsg1").innerHTML = "Your password weak. Add numbers.";
         return false;
      }

      return true

      }

   </script>

</html>
