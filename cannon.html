<!DOCTYPE html>

<!-- Fig. 14.26: cannon.html -->
<!-- Cannon Game HTML5 document. -->
<html>
   <head>
      <meta charset = "utf-8">
      <title>Cannon Game</title>
      <!-- <script src= "game.js"></script> -->
      <script src= "signup.js"></script>
      <script src= "welcome.js"></script>
	   <script src = "cannon.js"></script>
      <script src="login.js"></script>
      <script src="config.js"></script>
      <script src="css.js"></script>
      <link rel="stylesheet" href="style.css" preload> 

      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

   </head>
   <header>


   </header>
   <body>
      <menu>
         <div class="nav-links">
            <ul>
            <li><a href="#registerpage" onclick="showReg()">Register</a></li>
            <li><a href="#loginpage" onclick="showLogin()">Let's Play</a></li>
            <li><a href="#like">About</a></li>
            </ul>
          </div>
      </menu>

   <content>
      
      <div id="welcome">
         <p id="p1">Hogwarts Invaders</p>
         <p id="p2">
         <button id="regBut" onclick="showReg()" class="welcomeBut">Register</button> 
         <button id="gameBut" onclick="showLogin()" class="welcomeBut">Start to Play</button>
         <button id="aboutBut" onclick="showLogin()" class="welcomeBut">About</button>

         </p>
      </div>

      <section id="loginpage">

         <div id="login">
            <p id="p2" class="floating">
               Please log in
            </p>

            <div class="formWarpper, slide-rotate-ver-r-fwd">
            <div class="letterBack">
            <div class="signUpField">
            <form id="loginForm" class="slide-rotate-ver-r-fwd">

            <div class="signUpField">
            <label class="loginLabels">Username</label> 
            <input type="text" id="login_username" name="login_username" class="login_fields" oninput="inputAddEventListner('login_username', 'login_but')"> 
            </div>
            <div class="signUpField">
            <label class="loginLabels">Password</label> 
            <input type="password" id="login_pass" name="login_pass" class="login_fields" oninput="inputAddEventListner('login_pass', 'login_but')">             
            </div>

         </form>

         <div>
            <label class="loginLabels">Show Password</label>
            <input type="checkbox" onclick="showPass('login_pass')" id="cb3">   
         </div>

         <label id="login_errmsg" class="login_errmsg"></label>

         </div>
         </div>
         </div>

                     
         <div class="loginBut">
            <button id="login_but" class="welcomeBut" onclick="subLogin(login_username.value, login_pass.value)">Login</button>
            <button id="login_but_reset" class="welcomeBut" onclick="resetLogin()">Reset</button>

         </div>

         </div>
         </div>

      </section>


      <div id="game">
         <div id="welcomemsg">Hello,  <span id="span-username"></span> </div>
         <div id="logout"> <button id="logout_but">Log Out</button> </div>
         <!-- <div id="countdown"></div> -->
         <audio id = "blockerSound" preload = "auto">
         <source src = "blocker_hit.ogg" type = "audio/ogg"></audio>
      <audio id = "targetSound" preload = "auto">
         <source src = "target_hit.ogg" type = "audio/ogg"></audio>
      <audio id = "cannonSound" preload = "auto">
         <source src = "cannon_fire.ogg" type = "audio/ogg"></audio>
      <canvas id = "theCanvas" width = "800" height = "600" autofocus></canvas> 
      <span id="cords"></span> <br>
      
      <p id="cords2"></p>

      <p><input id = "startButton" type = "button" value = "Start Game">
      </p>
      </div>

      <section id="registerpage">


         <div id="reg">

            
            <p id="p2" class="floating">First time in Hogwarts?</p>
            <div class="formWarpper, slide-rotate-ver-r-fwd">
            <div class="letterBack" >
            <form id="regForm" class="slide-rotate-ver-r-fwd">
               
                  <div class="registerBoxes">
                     <div class="signUpField">
                   <label>Username</label> 
                    <input type="text" id="username" name="username" class="signUpField" oninput="inputAddEventListner('username', 'subForm')">             
                    <label id="errMsg4" class="err"></label>
                  </div>
      
                  <div class="signUpField">
                     <label>Password</label>
                     <input type="password" id="pass1" name="pass1" class="signUpField" oninput="inputAddEventListner('pass1', 'subForm')"> 
                  </div>
                  <div class="showPass">
                     <label>Show Password</label>
                     <input type="checkbox" onclick="showPass('pass1')" id="cb1">
                     </div>
                     <div class="signUpField">
                     <label>Password</label>
                     <input type="password" id="pass2" name="pass2" class="signUpField" oninput="inputAddEventListner('pass2', 'subForm')"> 
                     </div>
                     <div class="showPass">
                     <label>Show Password</label> 
                     <input type="checkbox" onclick="showPass('pass2')" id="cb2">
                     <label id="errMsg1" class="err"></label>
                  </div>
                     
                     
                     <div class="signUpField">
                        <label>First Name</label>
                     <input type="text" id="fname" name="fname" class="signUpField" oninput="inputAddEventListner('fname', 'subForm')"> 
                     <label id="errMsg2" class="err"></label>
                     </div>
                     <div class="signUpField">
                        <label>Last Name</label>
      
                     <input type="text" id="lname" name="lname" class="signUpField" oninput="inputAddEventListner('lname', 'subForm')">
                     <label id="errMsg3" class="err"></label> <br>
                     </div>
                     <div class="signUpField">
                        <label>Email</label>
      
                     <input type="email" id="email" name="email" class="signUpField" oninput="inputAddEventListner('email', 'subForm')">             
                     </div>
                     <div class="signUpField">
                        <label>Birthday</label>
      
                     <input type="date" id="bday" name="bday" class="signUpField"> 
                     </div>
                     <p> <label id="errMsg" class="err"></label>  </p>
                     
                     
                  </div>
               </div>
            </form> 
            <div class="registerBut">
            <button id="subForm" onClick="isValid()" class="welcomeBut">Submit </button>
            <button id="resetSUForm" onClick='resetRegisterForm()' class="welcomeBut"> Reset </button>
         </div>
         </div>   
      </div>

      </section>

      <div id="config">
         <p id="p2" class="floating">Game Settings</p>
         <div class="formWarpper, slide-rotate-ver-r-fwd">
            <div class="letterBack" > 
               <div id="welcomemsg">Hello,  <span id="span-username"></span> </div>
               <div class="regForm">  
               <div class="configFields">
                  <div>
                     <label>Insert key to shot with</label>
                     <input type="text" id="KeyToShot" name="KeyToShot" value="Space" class="configClass" onkeydown="choseKey(event)" maxlength="0" > 
                  </div>
               <div>
                  <label>Minutes</label> <input type="number" id="numMin" name="numMin" min="2" onchange="changeMin()" value="2">
                  <label>Seconds</label><input type="number" id="numSec" name="numSec" min="0" max="59" onchange="changeSec()" value="0">
               </div>
                  </div>


         <button id="saveConfig" onclick="saveConfig()"> Lets play!</button>
      </div>
      </div>
      </div>       
      </div>

   </content>
   </body>
   <footer>

   </footer>

   <script type="text/javascript"> 

      var logged = false;

      $(window ).load( function()
      {
         $( "#game" ).hide();
         $( "#reg" ).hide();
         $( "#login" ).hide();
         $( "#config" ).hide();
         $( "#welcome" ).show();    

      }  
      );

      $('#logout_but' ).click( function()
      {
         $( "#game" ).hide();
         $( "#reg" ).hide();
         $( "#login" ).hide();
         $( "#config" ).hide();
         $( "#welcome" ).show();
         setupGame();
         logged=false;

      }
      );


      function showLogin()
      {
         if (!logged){
         $( "#game" ).hide();
         $( "#welcome" ).hide();
         $( "#reg" ).hide();
         $( "#config" ).hide();
         $( "#login" ).show();
         resetRegisterForm()
         }

         else
         {
            alert("Log out first.")
         }

      }
      

      function showReg()
      {
         $( "#welcome" ).hide();
         $( "#game" ).hide();
         $( "#reg" ).show();
         $( "#login" ).hide();
         $( "#config" ).hide();
         // $( "#regForm").hide();
         // $( '#regImg').css("visibility", "visible")
      }
      

      function showPass(pass) {
         
         var x = document.getElementById(pass);
         if (x.type === "password") {
            x.type = "text";
         } else {
            x.type = "password";
         }

      }

      
      function inputAddEventListner(elem, but)
      {
         login = document.getElementById(elem);
         done = false;
         login.addEventListener("keypress", function(event) {
         if (event.key === "Enter" && !done) {
            document.getElementById(but).click();
            done = true;
            };
         })
      }

    
      

   </script>

</html>
