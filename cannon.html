<!DOCTYPE html>

<!-- Fig. 14.26: cannon.html -->
<!-- Cannon Game HTML5 document. -->
<html>
   <head>
      <meta charset = "utf-8">
      <title>Cannon Game</title>
      <!-- <script src= "game.js"></script> -->
      <script src= "signup.js"></script>
      <script src= "welcome.js"></script>
	   <script src = "cannon.js"></script>
      <script src="login.js"></script>
      <script src="config.js"></script>
      <link rel="stylesheet" href="style.css">

      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <!-- <script src="/path/to/cdn/jquery.min.js"></script>
      <script src="/path/to/dist/jquery.countdown360.min.js"></script> -->

   <!--validation script-->
   <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
   <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>

   </head>
   <header>


   </header>
   <body>
      <menu>
         <div class="nav-links">
            <ul>
            <li><a href="#registerpage" onclick="showReg()">Register</a></li>
            <li><a href="#loginpage" onclick="showLogin()">Let's Play</a></li>
            <li><a href="#like">About</a></li>
            </ul>
          </div>
      </menu>

   <content>
      
      <div id="welcome">
         <p>WELCOME!</p>
         <button id="regBut" onclick="showReg()">Register</button>
         <button id="gameBut" onclick="showLogin()">Start to Play</button>
      </div>

      <section id="loginpage">

         <div id="login">
            <p>
               Please log in
            </p>
      
            Username: <input type="text" id="login_username" name="login_username" class="login_fields" oninput="inputAddEventListner('login_username', 'login_but')"> <br>
   
            Password: <input type="password" id="login_pass" name="login_pass" class="login_fields" oninput="inputAddEventListner('login_pass', 'login_but')">             
            <input type="checkbox" onclick="showPass('login_pass')" id="cb3">Show Password <br>
            <span id="login_errmsg" class="login_errmsg"></span> <br>
            
            <button id="login_but" onclick="subLogin(login_username.value, login_pass.value)">Login</button>
      
      
            </div>

      </section>


      <div id="game">
         <div id="welcomemsg">Hello,  <span id="span-username"></span> </div>
         <div id="logout"> <button id="logout_but">Log Out</button> </div>
         <!-- <div id="countdown"></div> -->
         <audio id = "blockerSound" preload = "auto">
         <source src = "blocker_hit.ogg" type = "audio/ogg"></audio>
      <audio id = "targetSound" preload = "auto">
         <source src = "target_hit.ogg" type = "audio/ogg"></audio>
      <audio id = "cannonSound" preload = "auto">
         <source src = "cannon_fire.ogg" type = "audio/ogg"></audio>
      <canvas id = "theCanvas" width = "800" height = "600" autofocus></canvas> 
      <span id="cords"></span>
      <p><input id = "startButton" type = "button" value = "Start Game">
      </p>
      </div>

      <section id="registerpage">

         <div id="reg">
            <p>
               Register Form
            </p>
            <form>
               Username: <input type="text" id="username" name="username" class="signUpField" oninput="inputAddEventListner('username', 'subForm')">             
               <span id="errMsg4" class="err"></span> <br>
               <br>
               Password: <input type="password" id="pass1" name="pass1" class="signUpField" oninput="inputAddEventListner('pass1', 'subForm')"> 
               <input type="checkbox" onclick="showPass('pass1')" id="cb1">Show Password <br>
               Password: <input type="password" id="pass2241032" name="pass2" class="signUpField" oninput="inputAddEventListner('pass2', 'subForm')"> 
               <input type="checkbox" onclick="showPass('pass2')" id="cb2">Show Password <br>
               <span id="errMsg1" class="err"></span> <br>
   
               First Name: <input type="text" id="fname" name="fname" class="signUpField" oninput="inputAddEventListner('fname', 'subForm')"> 
               <span id="errMsg2" class="err"></span> <br>
   
               Last Name: <input type="text" id="lname" name="lname" class="signUpField" oninput="inputAddEventListner('lname', 'subForm')">
               <span id="errMsg3" class="err"></span> <br>
               
               Email: <input type="email" id="email" name="email" class="signUpField" oninput="inputAddEventListner('email', 'subForm')">             
   
               Birthday: <input type="date" id="bday" name="bday" class="signUpField"> 
               <br>
               <p> <span id="errMsg" class="err"></span>  </p>
               <br>
            </form>
            <button id="subForm" onClick="isValid()">Submit </button>
   
         </div>   
      </section>

      <div id="config">
         <p> 
            Insert key to shot with: <input type="text" id="KeyToShot" name="KeyToShot" value="Space" class="configClass" onkeydown="choseKey(event)" maxlength="0" > 
            <br> <p>
               Minutes: <input type="number" id="numMin" name="numMin" min="2" onchange="changeMin()" value="2"> 
               Seconds:  <input type="number" id="numSec" name="numSec" min="0" max="59" onchange="changeSec()" value="0">
            </p>
         </p>
         <button id="saveConfig" onclick="saveConfig()"> Lets play!</button>

                       
      </div>

   </content>
   </body>
   <footer>

   </footer>

   <script type="text/javascript"> 

      var logged = false;

      $(window ).load( function()
      {
         $( "#game" ).hide();
         $( "#reg" ).hide();
         $( "#login" ).hide();
         $( "#config" ).hide();
         $( "#welcome" ).show();         

      }  
      );

      $('#logout_but' ).click( function()
      {
         $( "#game" ).hide();
         $( "#reg" ).hide();
         $( "#login" ).hide();
         $( "#config" ).hide();
         $( "#welcome" ).show();
         logged=false;

      }
      );


      function showLogin()
      {
         if (!logged){
         $( "#game" ).hide();
         $( "#welcome" ).hide();
         $( "#reg" ).hide();
         $( "#config" ).hide();
         $( "#login" ).show();
         }

         else
         {
            alert("Log out first.")
         }

      }
      

      function showReg()
      {
         $( "#welcome" ).hide();
         $( "#game" ).hide();
         $( "#reg" ).show();
         $( "#login" ).hide();
         $( "#config" ).hide();
      }
      

      function showPass(pass) {
         
         var x = document.getElementById(pass);
         if (x.type === "password") {
            x.type = "text";
         } else {
            x.type = "password";
         }

      }

      
      function inputAddEventListner(elem, but)
      {
         login = document.getElementById(elem);
         done = false;
         login.addEventListener("keypress", function(event) {
         if (event.key === "Enter" && !done) {
            document.getElementById(but).click();
            done = true;
            };
         })
      }

   </script>

</html>
