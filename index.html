<!DOCTYPE html>

<!-- Fig. 14.26: cannon.html -->
<!-- Cannon Game HTML5 document. -->
<html>
   <head>
      <meta charset = "utf-8">
      <title>Hogwarts Invaders</title>
      <link rel="icon" type="image/x-icon" href="pic\icon-2.png">

      <!-- <script src= "game.js"></script> -->
      <script src= "signup.js"></script>
      <script src= "welcome.js"></script>
	   <script src = "cannon.js"></script>
      <script src="login.js"></script>
      <script src="config.js"></script>
      <script src="css.js"></script>
      <script src="records.js"></script>

      <link rel="stylesheet" href="style.css" preload> 

      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

   </head>
   <header>


   </header>
   <body>
      <div class="area"></div>
      <nav class="main-menu">
         <td>
         <ul>
             <li>
               <tr>
                 <a href="#welcome" onclick="showWelcome();return false;">
                     <i class="fa fa-2x"> <img src="pic\icon.png"> </i>
                     <span class="nav-text">
                        <label id="span-username"></label>
                     </span>
                 </a>
               </tr>
             </li>
             <li class="has-subnav" id="regNav">
                 <a href="#registerpage" onclick="showReg();return false;">
                     <i class="fa fa-2x">
                        <img src="pic\hat-reg.png">
                     </i>
                     <span class="nav-text">
                         Register
                     </span>
                 </a>
                 
             </li>
             <li class="has-subnav" id="logNav">
                 <a href="#loginpage" onclick="showLogin();return false;">
                    <i class="fa fa-2x">
                     <img src="pic\login.png">
                    </i>
                     <span class="nav-text">
                         Login
                     </span>
                 </a>
                 
             </li>
             <li class="has-subnav" id="aboutID">
                 <a href="#about" onclick="displayModal('aboutModal');return false;" >
                    <i class="fa fa-2x">
                     <img src="pic\about.png">
                    </i>
                     <span class="nav-text">
                         About
                     </span>
                 </a>
             </li>
             <li class="loginOnly">
               <a href="#game" onclick="showGame();return false;"">
                  <i class="fa fa-2x">
                   <img src="pic\game.png">
                  </i>
                   <span class="nav-text">
                       New Game
                   </span>
               </a>
           </li>
           <li class="loginOnly">
            <a href="#records" onclick="displayModal('recTable');return false;" >
               <i class="fa fa-2x">
                <img src="pic\records.png">
               </i>
                <span class="nav-text">
                    Your Records
                </span>
            </a>
        </li>
             <li class="loginOnly">
               <a href="#lpgout" onclick="logout();return false;">
                  <i class="fa fa-2x">
                   <img src="pic\logout.png">
                  </i>
                   <span class="nav-text">
                       Log Out
                   </span>
               </a>
           </li>
     </nav>
   <content>
      
      <div class="overlay">

      <div id="welcome">


         <p id="p1">Hogwarts Invaders</p>
         <p id="p2">
         <!-- <button id="regBut" onclick="showReg()" class="welcomeBut">Register</button>  -->
         <button id="regBut" onclick="showReg()" class="welcomeBut">Register</button> 

         <button id="gameBut" onclick="showLogin()" class="welcomeBut">Login</button>
         <button id="aboutBut" onclick="displayModal('aboutModal')" class="welcomeBut">About</button>

         </p>

      </div>

      <section id="loginpage">

         <div id="login">
            <p id="p2" class="floating">
               Please log in
            </p>

            <div class="formWarpper, slide-rotate-ver-r-fwd">
            <div class="letterBack">
            <div class="signUpField">
            <form id="loginForm" class="slide-rotate-ver-r-fwd">

            <div class="signUpField">
            <label class="loginLabels">Username</label> 
            <input type="text" id="login_username" name="login_username" class="login_fields" oninput="inputAddEventListner('login_username', 'login_but')"> 
            </div>
            <div class="signUpField">
            <label class="loginLabels">Password</label> 
            <input type="password" id="login_pass" name="login_pass" class="login_fields" oninput="inputAddEventListner('login_pass', 'login_but')">             
            </div>

         </form>

         <div>
            <label class="loginLabels">Show Password</label>
            <input type="checkbox" onclick="showPass('login_pass')" id="cb3">   
         </div>

         <label id="login_errmsg" class="login_errmsg"></label>

         </div>
         </div>
         </div>

                     
         <div class="loginBut">
            <button id="login_but" class="welcomeBut" onclick="subLogin(login_username.value, login_pass.value)">Login</button>
            <button id="login_but_reset" class="welcomeBut" onclick="resetLogin()">Reset</button>

         </div>

         </div>
         

      </section>


      <div id="game">
      <audio id="themesound" preload="auto">
         <source src="pic\theme.mp3"  type="audio/mpeg">
      </audio>
      <audio id="heroshotsound" preload="auto">
         <source src="pic\experliamos.mp3" type="audio/mpeg"></audio>
      <audio id="enemyshootsound" preload="auto">
         <source src="pic\enemyshoot.mp3" type="audio/mpeg"></audio>
      <audio id="timesound" preload="auto">
            <source src="pic\timesound.mp3" type="audio/mpeg"></audio>
      <audio id="vanishsound" preload="auto">
         <source src="pic\vanish.mp3" type="audio/mpeg"></audio>
      <audio id="lifesound" preload="auto">
            <source src="pic\lifesound.mp3" type="audio/mpeg"></audio>
      <audio id="hermaionieSound" preload="auto">
         <source src="pic\hermaionieSound.mp3" type="audio/mpeg"></audio>
      <audio id="ronSound" preload="auto">
            <source src="pic\ronSound.mp3" type="audio/mpeg"></audio>


      <canvas id = "theCanvas" width = "800" height = "600" autofocus></canvas> 
      

      <p><input id = "startButton" class="welcomeBut" type = "button" value = "Start Game">
      </p>
      </div>

      <section id="registerpage">


         <div id="reg">

            
            <p id="p2" class="floating">First time in Hogwarts?</p>
            <div class="formWarpper, slide-rotate-ver-r-fwd">
            <div class="letterBack" >
            <form id="regForm" class="slide-rotate-ver-r-fwd">
               
                  <div class="registerBoxes">
                     <div class="signUpField">
                   <label>Username</label> 
                    <input type="text" id="username" name="username" class="signUpField fill" oninput="inputAddEventListner('username', 'subForm')">             
                    <label id="errMsg4" class="err"></label>
                  </div>
      
                  <div class="signUpField">
                     <label>Password</label>
                     <input type="password" id="pass1" name="pass1" class="signUpField fill" oninput="inputAddEventListner('pass1', 'subForm')"> 
                  </div>
                  <div class="showPass">
                     <label>Show Password</label>
                     <input type="checkbox" onclick="showPass('pass1')" id="cb1">
                     </div>
                     <div class="signUpField">
                     <label>Password</label>
                     <input type="password" id="pass2" name="pass2" class="signUpField fill" oninput="inputAddEventListner('pass2', 'subForm')"> 
                     </div>
                     <div class="showPass">
                     <label>Show Password</label> 
                     <input type="checkbox" onclick="showPass('pass2')" id="cb2">
                     <label id="errMsg1" class="err"></label>
                  </div>
                     
                     
                     <div class="signUpField">
                        <label>First Name</label>
                     <input type="text" id="fname" name="fname" class="signUpField fill" oninput="inputAddEventListner('fname', 'subForm')" placeholder="Enter alphabetic characters only." > 
                     <label id="errMsg2" class="err"></label>
                     </div>
                     <div class="signUpField">
                        <label>Last Name</label>
      
                     <input type="text" id="lname" name="lname" class="signUpField fill" oninput="inputAddEventListner('lname', 'subForm')" placeholder="Enter alphabetic characters only.">
                     <label id="errMsg3" class="err"></label> <br>
                     </div>
                     <div class="signUpField">
                        <label>Email</label>
      
                     <input type="email" id="email" name="email" class="signUpField fill" oninput="inputAddEventListner('email', 'subForm')">             
                     </div>
                     <div class="signUpField">
                        <label>Birthday</label>
      
                     <input type="date" id="bday" name="bday" class="signUpField fill"> 
                     </div>
                     <p> <label id="errMsg" class="err"></label>  </p>
                     
                     
                  </div>
               </div>
            </form> 
            <div class="registerBut">
            <button id="subForm" onClick="isValid()" class="welcomeBut">Submit </button>
            <button id="resetSUForm" onClick='resetRegisterForm()' class="welcomeBut"> Reset </button>
         </div>
         </div>   
      </div>

      </section>
<section id="configSection">
      <div id="config">
         <p id="p2" class="floating">Game Settings</p>
         <div class="formWarpper, slide-rotate-ver-r-fwd">

            <div class="letterBack" > 
               <form class="regForm" id="configForm">  
                  <div id="welcomeConfig" class="welcomemsg">Welcome to Hogwarts,  <label id="span-username-conf"></label> </div>

               <div class="configFields">
                  <div>
                     <label>Insert key to shot with</label>
                     <input type="text" id="KeyToShot" name="KeyToShot" value="Space" class="configClass" onkeydown="choseKey(event)" maxlength="0" > 
                  </div>
               <div>
                  <label>Minutes</label> <input type="number" id="numMin" name="numMin" min="2" onchange="changeMin()" value="2">
                  <label>Seconds</label><input type="number" id="numSec" name="numSec" min="0" max="59" onchange="changeSec()" value="0">
               </div>
               <div>
                  <label>Location</label>

                  <select name="My location is..." id="playLoc">
                     <option value="chambers.png">The Chamber of Secret</option>
                     <option value="quiditch.png">Quiditch Field</option>
                     <option value="mirtletoilet.png">Moaning Myrtle Bathroom</option>
                     <option value="diagon.png">Diagon Alley</option>
                   </select>
               </div>
               <div>
                  <label>Charcter</label>

                  <select name="My charcter is..." id="playChar">
                     <option value="pic/hero.png">Harry Potter</option>
                     <option value="pic/herma.png">Hermione Granger</option>
                     <option value="pic/wisley.png">Ron Weasley</option>
                   </select>
               </div>
               
                  </div>
               </div>
            </form>
               <button id="saveConfig" onclick="saveConfig()" class="welcomeBut"> Let's play!</button>
      </div>
      </div>
      
   </section>
</div>
   <section id="about">

      <div id="aboutModal" class="modal">
         <div class="modal-content">
         <button id="close" onclick="hideModal('aboutModal')">X</button>
         <div class="aboutHeadlines">
         
         <p class="floating"> <label class="aboutTitle">Hogwarts Invaders </label></p>

         <label class="aboutLittleTitle"> <u>By: </u> <b>Itai Carmel</b>  208909416 and <b>Shay Sitri</b>  209405042 <br> </label>
         </div>  
         <div class="aboutTxt">
         <label> Our game based on "Harry Potter" movies. </label> <br>
         <label class="subHeader">
            You can play with:
         </label>
         <br>
         <table>
            <tr>
               <td>
                  <label><b>Harry Potter</b></label>
               </td>
               <td>
                  <img src="pic\harry.gif" width="85" height="100">
               </td>
               <td>
                  <label><b>Hermaionie Granger</b></label>
               </td>
               <td>
                  <img src="pic\herm.gif" width="85" height="100">
               </td>

               <td>
                  <label><b>Ron Weasley</b></label>
               </td>
               <td>
                  <img src="pic\ron.gif"  width="100" height="100">
               </td>
            </tr>
         </table>


            <label class="subHeader">
            Include game vs. Harry's enmies: 
            </label>
            <br>
            <table>
               <tr>
                  <td>
                     <label><b>Lord Voldemort</b></label>
                  </td>
                  <td>
                     <img src="pic\enemy.png" width="85" height="100">
                  </td>
                  <td>
                     <label><b>Bellatrix Lestrange</b></label>
                  </td>
                  <td>
                     <img src="pic\beatrix.png" width="85" height="100">
                  </td>
               </tr>
               <tr>
                  <td>
                     <label><b>Draco Malfoy</b></label>
                  </td>
                  <td>
                     <img src="pic\darco.png"  width="100" height="100">
                  </td>
                  <td>
                     <label><b>Dolores Umbridge</b></label>
                  </td>
                  <td>
                     <img src="pic\dolores.png"  width="85" height="110">
                  </td>
               </tr>
            </table>
            <label class="subHeader">Include some suprises:</label> <br>
            <table>
               <tr>
                  <td>
                     <label><b>The Golden Snitch</b></label>
                     <br><label>Gives extra life.</label>
                  </td>
                  <td>
                     <img src="pic\snitch.gif"  width="150" height="80">
                  </td>
               </tr>

               <tr>
                  <td>
                     <label><b>Invisibility Cloak</b></label>
                     <br><label>Vanish the charcter for 5 seconds.</label>
                  </td>
                  <td>
                     <img src="https://miro.medium.com/v2/resize:fit:490/1*xIho0iQQPs5SyrCHvw55SA.gif"  width="150" height="80">
                  </td>
               </tr>

               <tr>
                  <td>
                     <label><b>Time Turner</b></label>
                     <br><label>Gives extra 5 second.</label>
                  </td>
                  <td>
                     <img src="https://64.media.tumblr.com/aad2e25a5d34b952ff0e8c87b13f1e67/11c950656f86f939-e4/s250x400/7ffdf634d46ba0b2e0a606d5549aa144e1a06d43.gif"  width="150" height="80">
                  </td>
               </tr>
            </table>
         </label>
         </div>
      </div>
      </div>

   </section>


   <div id="recTable" class="modal">
      <div class="modal-content">
      <button id="closeRecord" onclick="hideModal('recTable')">X</button>
      <div id="recordsTable"></div>
      </div>
   </div>

   </content>
   </body>
   <footer>

   </footer>

   <script type="text/javascript"> 


      

      if(logged == true)
      {
         $( ".loginOnly" ).show();
      }
      else
      {
         $( ".loginOnly" ).hide();
      }

      $(window ).load( function()
      {
         showWelcome();
      }  
      );

      $('#logout_but' ).click( logout());

      function showWelcome()
      {
         $( "#game" ).hide();
         $( "#reg" ).hide();
         $( "#login" ).hide();
         $( "#config" ).hide();
         $( "#welcome" ).show(); 
         // $( ".loginOnly" ).show();
         stopTimer();
         setupGame();
         resetLogin();
         resetRegisterForm();
      }

      function logout()
      {
            $( "#game" ).hide();
            $( "#reg" ).hide();
            $( "#login" ).hide();
            $( "#config" ).hide();
            $( "#welcome" ).show();
            $ ('#regNav').show();
            $(" .loginOnly ").hide();
            userLogged = "" 
            document.getElementById("span-username").innerHTML = "";
            stopTimer();
            setupGame();
            logged=false;
      }

      function showLogin()
      {
         if (!logged){
         $( "#game" ).hide();
         $( "#welcome" ).hide();
         $( "#reg" ).hide();
         $( "#config" ).hide();
         $( "#login" ).show();
         resetLogin();
         }

         else
         {
            alert("Log out first.")
         }

      }
      

      function showReg()
      {
            $( "#welcome" ).hide();
            $( "#game" ).hide();
            $( "#reg" ).show();
            $( "#login" ).hide();
            $( "#config" ).hide();
            resetRegisterForm();
      }
      

      function showPass(pass) {
         
         var x = document.getElementById(pass);
         if (x.type === "password") {
            x.type = "text";
         } else {
            x.type = "password";
         }

      }

      
      function inputAddEventListner(elem, but)
      {
         login = document.getElementById(elem);
         done = false;
         login.addEventListener("keypress", function(event) {
         if (event.key === "Enter" && !done) {
            document.getElementById(but).click();
            done = true;
            };
         })
      }

    
      

   </script>

</html>
